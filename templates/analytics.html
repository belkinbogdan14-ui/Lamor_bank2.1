<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Аналитика - LAMOR BANK</title>
    <style>
        body { margin: 0; background: #050505; color: white; font-family: 'Segoe UI', sans-serif; display: flex; }
        .sidebar { width: 250px; height: 100vh; background: #0a0a0a; padding: 20px; border-right: 1px solid #111; position: fixed; }
        .nav-item { padding: 15px 0; color: #444; text-decoration: none; display: block; }
        .nav-item:hover, .active { color: #fff; }
        .main-content { margin-left: 290px; padding: 40px; width: 100%; }
        
        .stats-grid { display: grid; grid-template-columns: 1fr; gap: 20px; max-width: 900px; }
        .history-card { background: #0a0a0a; border: 1px solid #1a1a1a; border-radius: 12px; overflow: hidden; }
        
        table { width: 100%; border-collapse: collapse; }
        th { background: #111; color: #444; text-align: left; padding: 15px; font-size: 12px; text-transform: uppercase; }
        td { padding: 15px; border-bottom: 1px solid #111; font-size: 14px; }
        
        .amt { font-weight: bold; }
        .plus { color: #2ecc71; }
        .minus { color: #e74c3c; }
        .date { color: #333; font-size: 12px; }
    </style>
</head>
<body>
    <div class="sidebar" style="width:260px; background:#050505; height:100vh; border-right:1px solid #1a1a1a; position:fixed; display:flex; flex-direction:column; margin:0; padding:0;">
    <div style="padding:30px; font-weight:900; color:#2ecc71; font-size:22px; height:22px; line-height:22px;">LAMOR BANK</div>
    
    <ul style="list-style:none; padding:0; margin:0;">
        <li style="height:50px;"><a href="{{ url_for('home') }}" style="display:block; padding:15px 30px; color:#fff; text-decoration:none; line-height:20px;">Главная</a></li>
        <li style="height:50px;"><a href="{{ url_for('accounts') }}" style="display:block; padding:15px 30px; color:#fff; text-decoration:none; line-height:20px;">Счета</a></li>
        <li style="height:50px;"><a href="{{ url_for('payments') }}" style="display:block; padding:15px 30px; color:#fff; text-decoration:none; line-height:20px;">Платежи</a></li>
        <li style="height:50px;"><a href="{{ url_for('transfers') }}" style="display:block; padding:15px 30px; color:#fff; text-decoration:none; line-height:20px;">Переводы</a></li>
        <li style="height:50px;"><a href="{{ url_for('bonuses') }}" style="display:block; padding:15px 30px; color:#fff; text-decoration:none; line-height:20px;">Бонусы</a></li>
        <li style="height:50px;"><a href="{{ url_for('analytics') }}" style="display:block; padding:15px 30px; color:#fff; text-decoration:none; line-height:20px;">Аналитика</a></li>
        
        {% if is_admin %}
        <li style="height:50px;"><a href="{{ url_for('admin') }}" style="display:block; padding:15px 30px; color:#f1c40f; text-decoration:none; line-height:20px;">Админ-панель</a></li>
        {% endif %}
    </ul>

    <div style="margin-top:auto; padding-bottom:20px;">
        <a href="{{ url_for('logout') }}" style="display:block; padding:15px 30px; color:#e74c3c; text-decoration:none; font-weight:bold;">Выход</a>
    </div>
</div>


    <div class="main-content">
        <h2>История транзакций</h2>
        
        <div class="stats-grid">
            <div class="history-card">
                <table>
                    <thead>
                        <tr>
                            <th>Дата</th>
                            <th>Назначение</th>
                            <th>Сумма</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for tx in transactions %}
                        <tr>
                            <td class="date">{{ tx.date.strftime('%d.%m.%Y %H:%M') }}</td>
                            <td>{{ tx.target }}</td>
                            <td class="amt {% if tx.amount > 0 %}plus{% else %}minus{% endif %}">
                                {% if tx.amount > 0 %}+{% endif %}{{ tx.amount }} ГМР
                            </td>
                        </tr>
                        {% else %}
                        <tr>
                            <td colspan="3" style="text-align:center; color:#222; padding:40px;">Транзакций пока нет</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</body>
</html>